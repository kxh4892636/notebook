---
id: 3258c243-b37e-44f6-b2d2-49131f8c2178
---

# 数组

## 基础

**声明数组**

- 索引从 0 开始;

```c
int scores[100];
```

**声明并初始化**

```c
int a[5] = {22, 37, 3490, 18, 95};
```

**自动初始化**

- 默认初始化为 0;

```c
int a[5] = {22, 37, 3490};
// 等同于
int a[5] = {22, 37, 3490, 0, 0};
```

**指定位置初始化**

```c
int a[15] = {[9] = 7, [14] = 48, [2] = 29};
```

**省略长度**

```c
int a[] = {22, 37, 3490};
// 等同于
int a[3] = {22, 37, 3490};
```

**指定位置 + 省略长度**

- 数组长度为最大的指定位置 + 1;

## 数组长度

**sizeof**

```c
int a[] = {22, 37, 3490};
int arrLen = sizeof(a); // 12
```

**数组长度**

```c
// 使用 %zu
int x[12];
printf("%zu\n", sizeof(x));     // 48
printf("%zu\n", sizeof(int));  // 4
printf("%zu\n", sizeof(x) / sizeof(int)); // 12
```

## 多维数组

**声明**

```c
int board[10][10];
int c[4][5][6];
```

**声明并初始化**

```c
int a[2][5] = {
  {0, 1, 2, 3, 4},
  {5, 6, 7, 8, 9}
};
```

**其他**

- 自动初始化, 指定位置初始化同一维数组;

## 变长数组

**变长数组**

- 运行时才能确定数组长度;

```c
int m = 4;
int n = 5;
int c[m][n];
```

## 数组地址

**数组地址**

- 数组地址连续存储;
- 数组名等同数组起始地址, 即指向第一个成员的指针;

```c
int a[5] = {11, 22, 33, 44, 55};

int* p = &a[0];
// 等同于
int* p = a;
```

**函数原型中的数组**

```c
// 写法一
int sum(int arr[], int len);
// 写法二
int sum(int* arr, int len);
```

**多维数组的地址**

```c
// a 指向 a[0]
// a[0] 指向 a[0][0]
int a[4][2];
*(a[0]);
// 等同于
**a
```

**不可更改性**

- 数组名指向的地址不可更改;

```c
int ints[100];
ints = NULL; // 报错

int a[5] = {1, 2, 3, 4, 5};
int b[5] = a; // 报错
```

## 数组指针的加减法

**数组指针的加减法**

- a + 1 指向下一个成员的地址;
- a - 1 指向上一个成员的地址;

```c
a[b] == *(a + b)
```

**注意**

- 数组名指向的地址不可更改;
- 需要先将地址赋值给指针变量;

```c
int a[] = {11, 22, 33, 44, 55, 999};
int* p = a;
while (*p != 999) {
  printf("%d\n", *p);
  p++;
}
```

**多维数组**

```c
int arr[4][2];
// 指针指向 arr[1]
arr + 1;
// 指针指向 arr[0][1]
arr[0] + 1
```

**数组指针相减**

- 返回两个数组元素的距离;

```c
int* p = &a[5];
int* q = &a[1];

printf("%d\n", p - q); // 4
printf("%d\n", q - p); // -4
```

## 数组的复制

**数组复制**

```c
for (i = 0; i < N; i++)
  a[i] = b[i];

memcpy(a, b, sizeof(b));
```

## 作为函数参数

### 声明参数数组

**声明数组参数**

- 同时传入数组名和数组长度;

```c
int sum_array(int a[], int n) {
  // ...
}

int a[] = {3, 5, 7, 3};
int sum = sum_array(a, 4);
```

**多维数组**

- 传入第一维长度;
- 其他维长度写入函数定义;

```c
int sum_array(int a[][4], int n) {
  // ...
}

int a[2][4] = {
  {1, 2, 3, 4},
  {8, 9, 10, 11}
};
int sum = sum_array(a, 2);
```

### 变长数组作为参数

**变长数组作为参数**

- 长度写在变长数组前面;

```c
int sum_array(int n, int a[n]) {
  // ...
}

int a[] = {3, 5, 7, 3};
int sum = sum_array(4, a);
```

**省略参数名**

```c
int sum_array(int, int [*]);
int sum_array(int, int []);
```

**多维数组**

```c
// 原来的写法
int sum_array(int a[][4], int n);
// 变长数组的写法
int sum_array(int n, int m, int a[n][m]);
```

### 参数字面量作为参数

```c
// 数组变量作为参数
int a[] = {2, 3, 4, 5};
int sum = sum_array(a, 4);

// 数组字面量作为参数
int sum = sum_array((int []){2, 3, 4, 5}, 4);
```
